---
// Remove current url path and remove trailing slash if exists
const currentUrlPath = Astro.url.pathname.replace(/\/+$/, "");

// Get url array from path
// eg: /tags/tailwindcss => ['tags', 'tailwindcss']
const breadcrumbList = currentUrlPath.split("/").slice(1);

// if breadcrumb is Home > Posts > 1 <etc>
// replace Posts with Posts (page number)
breadcrumbList[0] === "posts" &&
  breadcrumbList.splice(0, 2, `Posts (page ${breadcrumbList[1] || 1})`);

// if breadcrumb is Home > Tags > [tag] > [page] <etc>
// replace [tag] > [page] with [tag] (page number)
breadcrumbList[0] === "tags" &&
  !isNaN(Number(breadcrumbList[2])) &&
  breadcrumbList.splice(
    1,
    3,
    `${breadcrumbList[1]} ${
      Number(breadcrumbList[2]) === 1 ? "" : "(page " + breadcrumbList[2] + ")"
    }`
  );
---

<div class="mx-auto max-w-6xl px-4 pb-4">
  <wa-breadcrumb>
    <wa-breadcrumb-item
      href="/"
      class="capitalize opacity-70 transition-opacity hover:opacity-100"
      >Home</wa-breadcrumb-item
    >
    {
      breadcrumbList.map((breadcrumb, index) =>
        index + 1 === breadcrumbList.length ? (
          <wa-breadcrumb-item class="text-base-content cursor-default">
            {breadcrumb}
          </wa-breadcrumb-item>
        ) : (
          <wa-breadcrumb-item
            href={`/${breadcrumb}/`}
            class="capitalize opacity-70 transition-opacity hover:opacity-100"
          >
            {breadcrumb}
          </wa-breadcrumb-item>
        )
      )
    }
  </wa-breadcrumb>
</div>
