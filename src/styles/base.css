@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root,
  html[data-theme="light"] {
    --color-fill: 251, 254, 251;
    --color-text-base: 40, 39, 40;
    --color-text-muted: 40, 39, 40;
    --color-accent: 0, 108, 172;
    --color-card: 230, 230, 230;
    --color-card-muted: 205, 205, 205;
    --color-border: 236, 233, 233;
  }

  html[data-theme="dark"] {
    --color-fill: 33, 39, 55;
    --color-text-base: 234, 237, 243;
    --color-text-muted: 200, 200, 200;
    --color-accent: 255, 107, 1;
    --color-card: 52, 63, 96;
    --color-card-muted: 51, 65, 85;
    --color-border: 171, 75, 8;
  }

  /* prevent layout shifts during theme switching */
  html {
    scroll-behavior: smooth;
  }

  /* critical layout stability */
  body {
    overflow-x: hidden;
  }

  /* ensure stable viewport height */
  html,
  body {
    min-height: 100vh;
  }

  /* prevent content jumping during load */
  main {
    min-height: 100vh;
  }

  /* ensure images don't cause layout shifts */
  img {
    max-width: 100%;
    height: auto;
  }

  #sun-svg,
  html[data-theme="business"] #moon-svg {
    display: none;
  }

  #moon-svg,
  html[data-theme="business"] #sun-svg {
    display: block;
  }

  body {
    @apply min-h-[100svh] bg-base-100 font-sans text-base-content;
  }

  section,
  footer {
    @apply mx-auto max-w-6xl px-4;
  }

  a {
    @apply outline-2 outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-dashed;
  }

  svg {
    @apply inline-block h-6 w-6 fill-base-content group-hover:fill-primary-content;
  }

  svg.icon-tabler {
    @apply inline-block h-6 w-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110;
  }

  code,
  blockquote {
    word-wrap: break-word;
  }

  pre > code {
    white-space: pre;
  }

  [data-theme="cupcake"] [data-id="logo"] {
    @apply bg-slate-800 rounded-xl px-2;
  }
}

@layer components {
  .display-none {
    @apply hidden;
  }

  .focus-outline {
    @apply outline-2 outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-dashed;
  }
}

:not(:defined) {
  visibility: hidden;
}

/* prevent layout shifts for WebAwesome components */
wa-button:not(:defined) {
  display: inline-block;
  min-height: 2.5rem;
  min-width: 2.5rem;
}

wa-drawer:not(:defined) {
  display: inline-block;
  min-height: 2.5rem;
  min-width: 2.5rem;
}

/* ensure mobile navigation button has stable dimensions */
wa-button {
  min-width: 2.5rem;
  min-height: 2.5rem;
}

/* header loading state */
header:not(.header-stable) {
  opacity: 0.8;
}

header.header-stable {
  opacity: 1;
  transition: opacity 0.2s ease-in;
}

/* logo loading state */
.logo-skeleton {
  opacity: 1;
  transition: opacity 0.3s ease-out;
}

.logo-loaded .logo-skeleton {
  opacity: 0;
}

.logo-loaded [data-id="logo"] {
  opacity: 1;
  transition: opacity 0.3s ease-in;
}

[data-id="logo"] {
  opacity: 0;
}

:root {
  --wa-color-surface-default: 97.7882% 0.00418 56.375637;
}

.wa-dark,
.wa-invert,
:is(:host-context(.wa-dark)) {
  /* your custom styles here */
  --wa-color-surface-default: 33, 39, 55;
}

/* ensure logo image is properly contained */
.logo-container img {
  opacity: 1;
  transition: opacity 0.3s ease-in;
}

.logo-loaded .logo-container img {
  opacity: 1;
}

/* additional optimizations for year pages */
.logo-container {
  min-height: 200px;
}

/* prevent iframe layout shifts */
iframe {
  border: none;
}

.logo-container {
  background-color: rgba(0, 0, 0, 0.8);
}
.logo-container.dark-logo {
  background-color: rgba(255, 255, 255, 0.8);
}
